<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:fb="http://www.facebook.com/2008/fbml">
<head runat="server">
<title>Facebook StreamPublish Test</title>
<style type="text/css">
#FacebookOAuthGraphTest {
	width:550px;
	height:400px;
	margin:0 auto;
}
</style>
</head>
<body>
<div align="center">
<div id="flashContent"></div>
</div>
<div id="fb-root"></div> 

<script type="text/javascript" src="Scripts/swfobject.js"></script>
<script type="text/javascript">
    var flashVars = {};
    var params = { menu: "false", allowScriptAccess: "always" };
    params.wmode = "opaque";
    var attributes = { id: "FacebookOAuthGraphTest", name: "FacebookOAuthGraphTest" };
    swfobject.embedSWF("main.swf", "flashContent", "550", "400", "9.0.47", "Scripts/expressInstall.swf", flashVars, params, attributes);
</script>

<script type="text/javascript">

    function streamPublishForFriend(friend_uid, msg) {

        FB.ui(
           {
               method: 'stream.publish',
               message: msg,
               attachment: {
                   name: '測試用 js 發布',
                   caption: '{*actor*} 說要測試看看囉！',
                   href: 'http://patw.idv.tw',
                   media: [{ 'type': 'image', 'src': 'http://patw.idv.tw/logo.png', 'href': 'http://patw.idv.tw'}]
               },
               target_id: '100003211064727',
               action_links: [{ 'text': 'Partner Studio', 'href': 'http://patw.idv.tw'}],
               user_prompt_message: '你想要對你的朋友說什麼呢？'
           },
           function(response) {
               if (response && response.post_id) {
                   alert('已經發布');
               } else {
                   alert('未發布');
               }
           }
         );

        }
</script>


<a href="javascript:streamPublishForFriend('100003211064727', '測試喔');">以 js 發布</a>


        <script type="text/javascript">

            window.fbAsyncInit = function() {
            FB.init({ appId: '188655821176855', status: true, cookie: true, xfbml: true });
            };
            (function() {
                var e = document.createElement('script');
                e.type = 'text/javascript';
                e.src = document.location.protocol +
                    '//connect.facebook.net/zh_TW/all.js';
                e.async = true;
                document.getElementById('fb-root').appendChild(e);
            } ());
        </script>

</body>
</html>
